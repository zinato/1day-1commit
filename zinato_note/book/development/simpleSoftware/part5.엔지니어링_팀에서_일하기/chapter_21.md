### CHAPTER 21. 리팩토링 할 때는 기능에 주목하라

- 리팩토링은 본질적으로 __조직적인__ 절차다 ('체계가 있다'는 뜻)
- 현재 제품이나 시스템의 기능적 목표와 관련이 없는 리팩토링은 아무도 관심을 보이지 않는 쓸모 없는 물건을 정리하는 행위처럼
아무것도 성취하지 못한다.
  
#### 효과적으로 일하기

- 보통은 구현하고 싶은 기능을 고르고, 그 기능을 더 쉽게 구현하기 위해 어떻게 리팩토링하면 좋을지 알아내면 된다. 
- 여러분이 한일이 효과가 있어야 한다. 
- 불편하거나 혼란스럽다는 느낌에 빠져 있을 게 아니라 문제를 단계적으로 공격할 체계를 구축해서 상황을 개선하기 위해 노력해야 한다.

> 복잡한 코드베이스를 정리하는 핵심 원칙은 항상 기능을 위해 리팩토링하라는 것이다.
> 일단 시간이 지날수록 시스템이 더 나빠지지 않고 더 나아지는 상태로 만드는걸 첫 번째 목표로 삼아라.

- 무언가를 더 좋게하되 시간의 흐름에 따라 나빠지는 속도보다 더 빨리 나아지는 것이 중요하다.

> 영원히 리팩토링에만 매달릴 수는 없으므로 새로운 기능을 추가하겠다는 목표와 리팩토링 사이에 균형점을 잘 찾아야 한다. 

#### 리팩토링 한계 설정하기

- 보통 '이 기능을 완성하기 전까지 리팩토링을 하지 않겠다.' 또는 '이 기능을 출시하기 전에 사용 중인 프로그래밍 언어에 변화가 
  없을 것으로 가정하고 작업하겠다' 같은 리팩토링의 한계를 설정하는 것이 좋다. 
- 그 대신 그 한계 내에서는 제대로 작업하려고 노력한다. 

#### 리팩토링을 하면 시간이 절약된다

- 복잡한 시스템 작업 중에는 리팩토링 없이 기능만 추가하는 게 더 빠르다고 느낄 수도 있다. (그럴 때도 있다.)
- 하지만 새로운 기능을 추가히기 전에 시스템을 잘 정리해두면 보통은 __전체 작업 시간__ 이 줄어든다. (실제 경험이다.)

#### 명확하게 만들어라

- 리팩토링 '완료' 여부를 정할 때 쓰는 또 다른 기준이 있다. 
- 설계한 패턴을 다른 이들이 명확하게 알아보는지, 이후 그 패턴으로 그 코드를 유지 보수할 수 있다고 생각되는지다. 
- 새로운 기능을 넣은 방식도 다른 방식을 떠오릴 수 없을 정도로 __명확하고 훌륭해야 한다.__ 
- 완벽하게 달성하는 건 불가능하겠지만 소프트웨어 설계의 원칙이 그렇다는걸 이해해둘 필요는 있다. 

> 세상에 완벽한 설계는 없다. 더 나은 설계가 있을 뿐이다.

#### 정리 

- 제품 생산으로 연결되지 않는 리팩토링은 다양한 종류의 문제를 많이 야기한다.
- 반면 리팩토링을 포기하고 그저 시스템을 생산하는 데이만 집착하면 생산 자체가 불가능해지거나 어려워진다.
> 제품 생산과 신뢰할 수 있는 단순하고 빠른 방식으로 제품을 잘 생산하도록 시스템을 정리하는일, 두 가지를 다 해야 한다. 
- 잔디에 물을주는 건(리팩토링) 좋은 일이다. 하지만 불부터 끄자.
